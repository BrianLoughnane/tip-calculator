angular.module("tcApp").controller("NewMealCtrl",["$scope","$location","earnings",function(t,a,e){var i=this;i.meal={},i.basePrice=0,i.taxRate=0,i.tipRate=0,i.taxRatePercentage=i.taxRate/100,i.tipRatePercentage=i.tipRate/100,i.subtotal=0,i.tip=0,i.total=0,i.submit=function(){i.myForm.$valid&&(e.mealCount++,e.tipTotal+=i.tip,e.averageTip=e.tipTotal/e.mealCount,a.url("/my-earnings"))},t.$watch("nm.basePrice",function(){i.subtotal=i.basePrice+i.basePrice*i.taxRatePercentage,i.tip=i.basePrice*i.tipRatePercentage,i.total=i.subtotal+i.tip}),t.$watch("nm.taxRate",function(){i.taxRatePercentage=i.taxRate/100,i.subtotal=i.basePrice+i.basePrice*i.taxRatePercentage,i.total=i.subtotal+i.tip}),t.$watch("nm.tipRate",function(){i.tipRatePercentage=i.tipRate/100,i.tip=i.basePrice*i.tipRatePercentage,i.total=i.subtotal+i.tip})}]);